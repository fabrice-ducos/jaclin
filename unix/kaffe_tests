set VERBOSE 0
cd ../tests

foreach file [glob tcljava/*.test jacl/*.test inprogress/*.test tcl/*.test] {
  switch $file {
    tcljava/ReflectObject.test -
    tcljava/PkgInvoker.test -
    tcljava/JavaThrowCmd.test -
    tcljava/JavaLoadCmd.test -
    tcljava/JavaInvoke.test -
    tcljava/JavaInfoCmd.test -
    tcljava/JavaFieldCmd.test -
    tcljava/JavaDefineClassCmd.test -
    tcljava/FuncSig.test -
    jacl/IdleHandler.test -
    jacl/Interp.test -
    jacl/FileCmd.test -
    jacl/Notifier.test -
    inprogress/EventAdaptor.test -
    inprogress/TimerHandler.test -
    inprogress/CallFrame.test -
    inprogress/CdCmd.test -
    {} {}
    default {
      puts $file
      flush stdout
      source $file
      #set VERBOSE 1
    }
  }
}



if {0} {

#check into

tcljava/PkgInvoker.test


}






if {0} {



if { [regexp {^1.2.*} $java::version] } {
    set FuncSig1_3 \
	    {{clone java.lang.Object 0 4 0} {equals java.lang.Object 1 0 0} {finalize java.lang.Object 0 4 0} {getClass java.lang.Object 1 0 0} {getNonPublicTester tests.invoke.PublicTester 1 0 0} {getStringA tests.invoke.IntA 1 0 0} {getStringC tests.invoke.PublicTester 1 0 0} {hashCode java.lang.Object 1 0 0} {noAccess tests.invoke.PublicTester 0 0 0} {noAccess2 tests.invoke.NonPublicTester 0 0 0} {noAccess3 tests.invoke.NonPublicTester 1 0 0} {notify java.lang.Object 1 0 0} {notifyAll java.lang.Object 1 0 0} {publicFunc tests.invoke.PublicTester 1 0 0} {registerNatives java.lang.Object 0 0 2} {toString java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0}}
} else  {
    set FuncSig1_3 \
	    {{clone java.lang.Object 0 4 0} {equals java.lang.Object 1 0 0} {finalize java.lang.Object 0 4 0} {getClass java.lang.Object 1 0 0} {getNonPublicTester tests.invoke.PublicTester 1 0 0} {getStringA tests.invoke.IntA 1 0 0} {getStringC tests.invoke.PublicTester 1 0 0} {hashCode java.lang.Object 1 0 0} {noAccess tests.invoke.PublicTester 0 0 0} {noAccess2 tests.invoke.NonPublicTester 0 0 0} {noAccess3 tests.invoke.NonPublicTester 1 0 0} {notify java.lang.Object 1 0 0} {notifyAll java.lang.Object 1 0 0} {publicFunc tests.invoke.PublicTester 1 0 0} {toString java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0} {wait java.lang.Object 1 0 0}}
}



test FuncSig-2.3 {getAllDeclaredMethods, caching} {
    set a [java::call tests.invoke.PublicTester getNonPublicTester]
    set m [java::call tcl.lang.FuncSig getAllDeclaredMethods [$a getClass]]

    set list ""

    set public    [java::field java.lang.reflect.Modifier PUBLIC]
    set protected [java::field java.lang.reflect.Modifier PROTECTED]
    set private   [java::field java.lang.reflect.Modifier PRIVATE]

    for {set i 0} {$i < [$m length]} {incr i} {
	set method [$m get $i]
	lappend list [list [$method getName]                                               [[$method getDeclaringClass] getName]                                          [expr [$method getModifiers] & $public]                                        [expr [$method getModifiers] & $protected]                                     [expr [$method getModifiers] & $private]]
   }

    lsort $list
} $FuncSig1_3






}
